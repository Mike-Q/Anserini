 <!DOCTYPE html>
 <html lang="en">
 <head>
  <meta charset="UTF-8">
  <title>Twitter Near-Real Time Search Demo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="http://cdn.bootcss.com/twitter-bootstrap/3.0.3/css/bootstrap.min.css">
  <script src="http://cdn.bootcss.com/jquery/1.10.2/jquery.min.js"></script>
  <script src="http://cdn.bootcss.com/twitter-bootstrap/3.0.3/js/bootstrap.min.js"></script>
  <script>
  $(document).ready(function() {

    (function($){
      
      $.extend({
        
        APP : {                
          
          startTimer : function() {
            
            $('#indexStatus').html('Running');
            $.APP.state = 'Running';
            $.APP.loopTimer();
            
          },  

          stopTimer : function() {
            
           $.get("http://localhost:8080/api/stop", function(data, status){
            alert("Data: " + data.indexName + "\nStatus: " + status);
            document.getElementById("indexName").innerHTML=data.indexName;
            document.getElementById("indexPath").innerHTML=data.indexPath;
            document.getElementById("tweetsIndexed").innerHTML=data.tweetsIndexed;
            document.getElementById("startTime").innerHTML=data.startTime;
            document.getElementById("stopTime").innerHTML=data.stopTime;


          });               
           
                    // set state
                    $.APP.state = 'stop';
                    $('#indexStatus').html('Stopped');
                    
                  },
                  
                  loopTimer : function() {
                    
                   if ($.APP.state === 'Running') {

                    $.get("http://localhost:8080/api/index", function(data, status){
                      document.getElementById("indexName").innerHTML=data.indexName;
                      document.getElementById("indexPath").innerHTML=data.indexPath;
                      document.getElementById("tweetsIndexed").innerHTML=data.tweetsIndexed;
                      document.getElementById("startTime").innerHTML=data.startTime;
                      document.getElementById("stopTime").innerHTML=data.stopTime;

                      



                    });
                    
                    
                        // loop
                        $.APP.t = setTimeout($.APP.loopTimer,1000);
                        
                      } else {
                        
                        // kill loop
                        clearTimeout($.APP.t);
                        return true;
                        
                      }  
                      
                    }
                    
                  }    
                  
                });

 $('body').on('click', '#update', function(){alert("update");$.APP.startTimer();});
 
        // $('#update').live('click', function() {
        //     $.APP.startTimer();
        // });     

 $('body').on('click', '#stop', function(){alert("stop");$.APP.stopTimer();});
 
        // $('#stop').live('click', function() {
        //     $.APP.stopTimer();
        // });
 
 
 
})(jQuery);

});



 </script>


 <script>
 function updateIndexStatus(){

  $.get("http://localhost:8080/api/index", function(data, status){
      // alert("Data: " + data.indexName + "\nStatus: " + status);
      document.getElementById("indexStatus").innerHTML="Running";
      
      document.getElementById("indexName").innerHTML=data.indexName;
      document.getElementById("indexPath").innerHTML=data.indexPath;
      document.getElementById("tweetsIndexed").innerHTML=data.tweetsIndexed;
      document.getElementById("startTime").innerHTML=data.startTime;
      document.getElementById("stopTime").innerHTML=data.stopTime;
      loopUpdating();



    });

}
function loopUpdating(){

}
</script>

<script>
function stopIndexing(){

  $.get("http://localhost:8080/api/stop", function(data, status){
    alert("Data: " + data.indexName + "\nStatus: " + status);
    document.getElementById("indexName").innerHTML=data.indexName;
    document.getElementById("indexPath").innerHTML=data.indexPath;
    document.getElementById("tweetsIndexed").innerHTML=data.tweetsIndexed;
    document.getElementById("startTime").innerHTML=data.startTime;
    document.getElementById("stopTime").innerHTML=data.stopTime;


  });

}
</script>
<script>
function terminateProcess(){

  $.get("http://localhost:8080/api/terminate", function(data, status){
    alert("Data: " + data.indexName + "\nStatus: " + status);
    location.reload();
    document.getElementById("indexStatus").innerHTML="Indexing aborted!";



  });

}
</script>
</head>
<body>


  <div class="container">



    <div class="page-header text-center">
      <!-- <div class="col-lg-12 text-center"> -->
      <h1>YoGosling Statistics</h1>
      <p class="lead">Check out our index health!</p>
    </div>

    

    <form class="form-horizontal"> 


      <div class="form-group">
        <label class="col-sm-5 control-label">Index Status</label>
        <div class="col-sm-6">
          <!-- <input type="text" class="form-control" id="indexName"></p> -->
          <p class="form-control-static" id="indexStatus">Running</p>
        </div>
      </div>

      <div class="form-group">
        <label class="col-sm-5 control-label">Index Name</label>
        <div class="col-sm-6">
          <!-- <input type="text" class="form-control" id="indexName"></p> -->
          <p class="form-control-static" id="indexName"></p>
        </div>
      </div>
      <div class="form-group">
        <label for="inputEmail3" class="col-sm-5 control-label">Index Path</label>
        <div class="col-sm-6">
          <!-- <input type="text" class="form-control" id="indexPath"></p> -->
          <p class="form-control-static" id="indexPath"></p>
        </div>
      </div>
      <div class="form-group">
        <label for="inputEmail3" class="col-sm-5 control-label">Tweets Indexed</label>
        <div class="col-sm-6">
          <!-- <input type="text" class="form-control" id="tweetsIndexed"></p> -->
          <p class="form-control-static" id="tweetsIndexed"></p>
        </div>
      </div>

      <div class="form-group">
        <label for="inputEmail3" class="col-sm-5 control-label">Start Time</label>
        <div class="col-sm-6">
          <!-- <input type="text" class="form-control" id="tweetsIndexed"></p> -->
          <p class="form-control-static" id="startTime"></p>
        </div>
      </div>

      <div class="form-group">
        <label for="inputEmail3" class="col-sm-5 control-label">Stop Time</label>
        <div class="col-sm-6">
          <!-- <input type="text" class="form-control" id="tweetsIndexed"></p> -->
          <p class="form-control-static" id="stopTime"></p>
        </div>
      </div>



      <div class="form-group">

      </div>

    </form>

    <div class="row">

      <div class="col-lg-5"></div>
      <div class="col-lg-1">
        <!-- <button onclick="updateIndexStatus()" class="btn btn-default pull-left" id="update">Update</button> -->
        <button  class="btn btn-default pull-left" id="update">Update</button>
      </div>
      <div class="col-lg-1">
        <!-- <button onclick="stopIndexing()" class="btn btn-default pull-left" id="stop">Stop</button> -->
        <button  class="btn btn-default pull-left" id="stop">Stop</button>
      </div>
      <div class="col-lg-5">
        <!-- <button onclick="terminateProcess()" class="btn btn-default pull-left" id="terminate">Terminate</button> -->
        <button onclick="terminateProcess()" class="btn btn-default pull-left" id="terminate">Terminate</button>
      </div>
    </div>


    <!-- </form> -->
    <!-- /.row -->

  </div>
</body>
</html> 


